<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="materialize/css/materialize.css">
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    </head>
    <body>
         <form method="POST" action="/search" id="searchForm">
            <h1>Search</h1> <p>
            
             <div class="formContent">
                <input type="text" name="timestamp" placeholder="Timestamp">
                <input type="text" name="limit" placeholder="Limit">
                <button type="submit" class="btn btn-default" style="margin-top: 10px">Submit</button>
            </div>
        </form>
        
            
        
        <div ng-app="myApp" ng-controller="myCtrl">
            <div ng-model="searchResults">
                <span ng-repeat="x in id">
                    {{x.id}} <br>
                </span>
            </div>
        </div>
        <script>
            
            var app = angular.module('myApp', []);
            
            app.controller('myCtrl', function($scope) {
                var items = "";
                $(document).ready(function () {
                    $("#searchForm").submit(function (event, jqXHR) {
                        event.preventDefault(); 
                        $.ajax({
                            "url": "/search",
                            "type":"POST",
                            "data": JSON.stringify({
                                timestamp: $("input[name='timestamp'").val(), 
                                limit: $("input[name='limit']").val()
                            }), 
                            "dataType": "json", 
                            "contentType": "application/json; charset=utf-8"
                        }).done(function(data, responseText, header) {
                            var parsedJson = $.parseJSON(JSON.stringify(header));
                            console.log(parsedJson.responseText);
                            var parsed2 = $.parseJSON(parsedJson.responseText);
                            var items = JSON.stringify(parsed2.items);
                           
                        });

                    });
                });
                
                 $scope.items = items; 
            });
            
            
        </script>
    </body>
</html>